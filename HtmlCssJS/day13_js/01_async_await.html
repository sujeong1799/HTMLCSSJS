<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>async await</title>
</head>
<body>

    <h3>
        https://jsonplaceholder.typicode.com/를 활용한 async await 연습
    </h3>

    <button type="button" id="btn">데이터 불러오기</button>

    <script>
        document.getElementById('btn').addEventListener('click', ()=>{
            // async는 함수 앞에만 달 수 있다.
            async function awaitEx(){
                try{
                    // 가져올 것 
                    //  resp객체는 응답객체
                    const resp = await fetch('https://jsonplaceholder.typicode.com/todos/1');
                    console.log(typeof resp);  // 타입 object 
                    //값이 들어왔다면 값을 text로 변환
                    const result = await resp.text(); // 타입 string 
                    console.log(typeof result);
                    // json으로 받으면 객체로 받는다.
                    let j = aJSON.parse(result);
                    console.log(j);
                    console.log(typeof j);
                    console.log(result);
                }catch(err){
                    console.log(err);
                }finally{
                    console.log('await finish');
                }
            }
            // 함수 호출
            awaitEx();
        })
    </script>
</body>
</html>